!function(t){var e={};function a(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);var r=new class{constructor(){this.domain=""}async makeRequest(t){let{path:e}=t;const a=await fetch(e);if(200===a.status)return a.json()}getSmallData(){return this.makeRequest({path:"http://www.filltext.com/?rows=32&id={number|1000}&firstName={firstName}&lastName={lastName}&email={email}&phone={phone|(xxx)xxx-xx-xx}&adress={addressObject}&description={lorem|32}"})}getBigData(){return this.makeRequest({path:"http://www.filltext.com/?rows=1000&id={number|1000}&firstName={firstName}&lastName={lastName}&email={email}&phone={phone|(xxx)xxx-xx-xx}&adress={addressObject}&description={lorem|32}"})}};class n{constructor(t){this.table=t,this.classSort={asc:"fa-sort-asc",desc:"fa-sort-desc"},this.render()}createTableHeader(){const t=document.createElement("thead"),e=document.createElement("tr"),a=["id","firstName","lastName","email","phone"];for(let t=0;t<a.length;t++){let r=document.createElement("th"),n=document.createElement("i");n.classList.add("fa","fa-sort-desc","ml-3"),r.setAttribute("data-field",a[t]),r.innerHTML=a[t],r.appendChild(n),this.addStyle(r),r.addEventListener("click",()=>{this.changeClass(n)}),e.appendChild(r)}return t.appendChild(e),t}changeClass(t){const{asc:e,desc:a}=this.classSort;t.classList.contains(a)?(t.classList.remove(a),t.classList.add(e)):(t.classList.remove(e),t.classList.add(a))}addStyle(t){t.style.cursor="pointer"}render(){this.table.appendChild(this.createTableHeader())}}class s{constructor(t){this.wrapper=t,this.buttonSelector="page-item"}createPagination(t){const e=document.createElement("nav"),a=this.createList("ul");for(let e=1;e<=t;e++)a.appendChild(this.getListPage(e));return e.appendChild(a),e}getListPage(t){const e=this.createItem("li");return e.appendChild(this.createLink("a",t)),e}createList(t){const e=document.createElement(t);return e.classList.add("pagination"),e}createItem(t){const e=document.createElement(t);return e.classList.add(this.buttonSelector),e}createLink(t,e){const a=document.createElement(t);return a.innerHTML=e,a.classList.add("page-link"),a}startPage(t,e){return(t-1)*e}endPage(t,e){return t+e}render(t){this.wrapper.appendChild(this.createPagination(t))}}class i{constructor(t){this.wrapper=t}createInput(){return this.input=document.createElement("input"),this.input.type="text",this.input.placeholder="Search",this.input.classList.add("form-control"),this.input}render(){this.wrapper.before(this.createInput())}}class o{constructor(t){this.wrapper=t,this.container=document.createElement("div")}createBlockContacts(t){let{name:e,value:a,dataTable:r}=t;const n=document.createElement("h2");n.innerHTML="Выбранный контакт",n.classList.add("form-group"),this.container.innerHTML="",this.container.appendChild(n);for(let t in r)if(r[t][e]==a){const e=o.setDataContacts({title:"Выбран пользователь:",text:r[t].id,selector:"b"}),a=o.setDataContacts({title:"Описание:",text:r[t].description,selector:"textarea"}),n=o.setDataContacts({title:"Адрес проживания:",text:r[t].adress.streetAddress,selector:"b"}),s=o.setDataContacts({title:"Город:",text:r[t].adress.city,selector:"b"}),i=o.setDataContacts({title:"Провинция/штат:",text:r[t].adress.state,selector:"b"}),c=o.setDataContacts({title:"Индекс:",text:r[t].adress.zip,selector:"b"});this.container.appendChild(e),this.container.appendChild(a),this.container.appendChild(n),this.container.appendChild(s),this.container.appendChild(i),this.container.appendChild(c)}return this.container}static setDataContacts(t){const{title:e,text:a,selector:r}=t,n=document.createElement("div"),s=document.createElement("span"),i=document.createElement(r);return s.innerHTML=e,i.innerHTML=a,n.appendChild(s),n.appendChild(i),n}render(t){this.wrapper.appendChild(this.createBlockContacts(t))}}function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}class h{constructor(t){this.table=t.table,this.dataTable=t.dataTable,this.pagination=new s(t.wrapper),this.filter=new i(t.wrapper),this.selectedContact=new o(t.wrapper),this.defaultKeys=["id","firstName","lastName","email","phone"],this.contactsOnePage=12,this.rowList=[],this.createRow=this.createRow.bind(this),this.createCell=this.createCell.bind(this),this.sortDirection=!1,this.render(t.dataTable)}createTableBody(t){this.tbody=document.createElement("tbody"),this.createPagination(t),this.filter.render();const e=document.querySelectorAll(".".concat(this.pagination.buttonSelector));return document.querySelectorAll("th").forEach(a=>{a.addEventListener("click",()=>{this.sortColumn(a,t),this.formattedTable({btn:e[0],target:e[0],dataTable:t,buttonList:e})})}),this.formattedTable({btn:e[0],target:e[0],dataTable:t,buttonList:e}),this.filteredTable({btn:e[0],target:e[0],dataTable:t,buttonList:e}),e.forEach(a=>{a.addEventListener("click",r=>{let{target:n}=r;return this.formattedTable({btn:a,target:n,dataTable:t,buttonList:e})})}),this.tbody}formattedTable(t){const{btn:e,buttonList:a}=t;this.removeActiveClass(e,a),this.renderTable(this.setPagination(t))}setPagination(t){let{target:e,dataTable:a}=t,r=parseInt(e.innerText,10),n=this.pagination.startPage(r,this.contactsOnePage),s=this.pagination.endPage(n,this.contactsOnePage);return a.slice(n,s)}removeActiveClass(t,e){e.forEach(t=>{t.classList.contains("active")&&t.classList.remove("active")}),t.classList.add("active")}createPagination(t){const e=Math.ceil(t.length/this.contactsOnePage);this.pagination.render(e)}createRow(t){return document.createElement(t)}createCell(t,e,a){this.rowList.push(e);const r=document.createElement("td");r.addEventListener("click",r=>{let{target:n}=r;this.rowList.forEach(t=>{t.classList.contains("bg-primary")&&(t.classList.remove("text-white"),t.classList.remove("bg-primary"))}),e.classList.add("bg-primary","text-white"),this.selectedContact.render({name:a,value:t,dataTable:this.dataTable})}),r.innerHTML=t,e.appendChild(r)}filteredTable(t){const{dataTable:e}=t;document.querySelector(".form-control").addEventListener("input",a=>{let{target:r}=a,n=e.filter((t,e)=>String(t.id).indexOf(r.value)>-1||t.firstName.toLowerCase().indexOf(r.value)>-1||t.lastName.toLowerCase().indexOf(r.value)>-1||t.email.toLowerCase().indexOf(r.value)>-1||t.phone.toLowerCase().indexOf(r.value)>-1?t:void 0);this.formattedTable(l(l({},t),{},{dataTable:n}))})}sortColumn(t,e){this.tbody.innerHTML="",e=e.sort((e,a)=>this.sortDirection?e[t.dataset.field]<a[t.dataset.field]?-1:e[t.dataset.field]>a[t.dataset.field]?1:0:e[t.dataset.field]>a[t.dataset.field]?-1:e[t.dataset.field]<a[t.dataset.field]?1:0),this.sortDirection=!this.sortDirection,this.renderTable(e)}renderTable(t){this.tbody.innerHTML="";for(let e in t){let a=this.createRow("tr");this.tbody.appendChild(a),this.defaultKeys.forEach(r=>{this.createCell(t[e][r],a,r)})}return this.tbody}render(t){this.table.appendChild(this.createTableBody(t))}}function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}class b{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.props=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){u(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},e),this.initTable(t)}initTable(t){t&&(this.containerContent=document.querySelector(t)),this.createTable()}createTable(){this.wrapper=document.createElement("div"),this.table=document.createElement("table"),this.table.classList.add("table","table-striped"),this.containerContent.classList.add("content-table"),this.wrapper.classList.add("content-table__wrapper"),this.containerContent.appendChild(this.wrapper),this.wrapper.appendChild(this.table),this.thead=new n(this.table),window.TableBody=new h({table:this.table,dataTable:this.props.dataTable,wrapper:this.wrapper}),window.Pagination=new s(this.wrapper)}}var m={channels:{},savedChannelName:[],fire(t,e){this.channels[t]||(this.channels[t]=[]),this.savedChannelName.includes(t)||(this.savedChannelName.push(t),this.channels[t].push(e))},on(t,e){const a=this.channels[t];a&&a.length&&a.forEach(t=>t(e))}};window.EventBus=m,async function(){try{const t=await r.getSmallData();new b("#test-table",{dataTable:t,minPageSize:10})}catch(t){console.log(t)}}()}]);